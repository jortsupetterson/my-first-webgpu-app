<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>My first webGPU app</title><link rel="stylesheet" href="./style.css"></head><body><canvas width="256" height="256"></canvas><script type="module">const e=document.querySelector("canvas");try{if(!navigator.gpu)throw new Error("Your browser cant use this system");const r=await navigator.gpu.requestAdapter();if(!r)throw new Error("Could not find a proper adapter");const t=await r.requestDevice();if(!t)throw new Error("No proper hardware found");const a=e.getContext("webgpu"),n=navigator.gpu.getPreferredCanvasFormat();a.configure({format:n,device:t});const o=new Float32Array([-.8,-.8,.8,-.8,.8,.8,-.8,-.8,.8,.8,-.8,.8]),i=t.createBuffer({label:"Cell vertices",size:o.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});t.queue.writeBuffer(i,0,o);const s={arrayStride:8,attributes:[{format:"float32x2",offset:0,shaderLocation:0}]},f=t.createShaderModule({label:"Cell shader",code:"@vertex\r\nfn vertexMain(@location(0) pos: vec2f) -> @builtin(position) vec4f {\r\n    return vec4f(pos,0,1);\r\n};\r\n\r\n@fragment\r\nfn fragmentMain() -> @location(0) vec4f {\r\n return vec4f(1,0,0,1);\r\n};"}),u=t.createRenderPipeline({label:"Cell pipeline",layout:"auto",vertex:{module:f,entryPoint:"vertexMain",buffers:[s]},fragment:{module:f,entryPoint:"fragmentMain",targets:[{format:n}]}}),c=t.createCommandEncoder(),l=c.beginRenderPass({colorAttachments:[{view:a.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:[0,0,.4,1]}]});l.setPipeline(u),l.setVertexBuffer(0,i),l.draw(o.length/2),l.end(),t.queue.submit([c.finish()])}catch(e){document.body.insertAdjacentHTML("afterend","<p>"+e+"</p>")}</script></body></html>